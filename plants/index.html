<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Plants</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=yes">
    <link rel="icon" href="img/logo_vector.svg" type="image/svg" sizes="32x32">
    <style>
    </style>
</head>
<body>
    <header>
        <nav class="logo">
            <div style="flex-grow: 1;">
                <img src="img/logo_vector.svg" alt="Plants logo" height="20" width="20"> <span>Plants</span>
            </div>
            <div class="top-a-nav">
                <a href="#welcome" class="my-orange" style="font-weight: bold;">Home</a>
                <a href="#about">About us</a>
                <a href="#service">Service</a>
                <a href="#prices">Price</a>
                <a href="#contacts">Contacts</a>
            </div>
        </nav>
    </header>
    <main>
        <section id="welcome">
            <div class="about-row">
                <img src="img/leafs.png" alt="leafs" width="449" height="407" style="margin: 63px 224px 62px 0px;">
                <div class="about-text">
                    <h1>We grow <span class="my-green">plants</span> and give <br>you oxygen</h1>
                    <p style=" margin-top: 0px;">Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
                        Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
                    <a class="learnmore-button" href="#about">LEARN MORE</a>
                </div>
            </div>
        </section>
        <section id="about" class="description-h2">
            <div class="about-row">
                <div class="about-text">
                    <h2>We are <span class="my-orange">professional <br>experienced</span> gardeners</h2>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
                        Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
                        when an unknown printer took a galley of type and scrambled it to make a type 
                        specimen book. It has survived not only five centuries, but also the leap into 
                        electronic typesetting, remaining essentially unchanged. </p>
                </div>
                <img src="img/houseplant.png" alt="house plant">
            </div>
        </section>
        <section id="service" class="description-h2">
            <div class="h2-and-buttons">
                <h2 style="margin-right: 142px;">Service and our <br> projects</h2>
                <div class="service-buttons">
                    <button class="orange-button" data-gardening="Garden care" data-val="inactive"><div>Gardens</div></button>
                    <button class="orange-button" data-gardening="Lawn care" data-val="inactive"><div>Lawn</div></button>
                    <button class="orange-button" data-gardening="Planting" data-val="inactive"><div>Planting</div></button>
                </div>
            </div>
            <div class="cards6"> 
                <div class="figure-cards" style="margin-bottom: 55px;">
                    <figure>
                        <img src="img/service-pics/pic1.png" alt="Garden care">
                        <figcaption data-gardening="Garden care">
                            <h3>Garden care</h3>
                            <p>Lorem Ipsum has been the industry</p>
                        </figcaption>
                    </figure> 
                    <figure style="margin-right: auto; margin-left: auto;">
                        <img src="img/service-pics/pic2.png" alt="Planting">
                        <figcaption data-gardening="Planting">
                            <h3>Planting</h3>
                            <p>Lorem Ipsum has been the industry</p>
                        </figcaption>
                    </figure>    
                    <figure>
                        <img src="img/service-pics/pic3.png" alt="Lawn care">
                        <figcaption data-gardening="Lawn care">
                            <h3>Lawn care</h3>
                            <p>Lorem Ipsum has been the industry</p>
                        </figcaption>
                    </figure>
                    <figure>
                        <img src="img/service-pics/pic4.png" alt="Planting">
                        <figcaption data-gardening="Planting">
                            <h3>Planting</h3>
                            <p>Lorem Ipsum has been the industry</p>
                        </figcaption>
                    </figure>    
                    <figure style="margin-right: auto; margin-left: auto;">
                        <img src="img/service-pics/pic5.png" alt="Garden care">
                        <figcaption data-gardening="Garden care">
                            <h3>Garden care</h3>
                            <p>Lorem Ipsum has been the industry</p>
                        </figcaption>
                    </figure>    
                    <figure>
                        <img src="img/service-pics/pic6.png" alt="Planting">
                        <figcaption data-gardening="Planting">
                            <h3>Planting</h3>
                            <p>Lorem Ipsum has been the industry</p>
                        </figcaption>
                    </figure>
                </div>
            </div>
        </section>
        <section id="prices" class="prices">
            <div class="colomn-right" style="text-align: left;">
                <h2>Prices</h2>
                <div>
                    <button data-val="inactive">
                        <section class="post-verstka">
                            <span style="flex-grow: 1;">Basics</span>
                            <img src="img/grey-check-mark.svg" class="circle2 light" alt="unselect" style="position: absolute;">
                        </section>
                    </button>
                    <button data-val="inactive">
                        <section class="post-verstka">
                            <span style="flex-grow: 1;">Standard</span>
                            <img src="img/grey-check-mark.svg" class="circle2 light" alt="unselect" style="position: absolute;">
                        </section>
                    </button>
                    <button data-val="inactive">
                        <section class="post-verstka">
                            <span style="flex-grow: 1;">Pro care</span> 
                            <img src="img/grey-check-mark.svg" class="circle2 light" alt="unselect" style="position: absolute;">
                        </section>
                    </button>
                </div>
            </div>
            <div class="colomn-left" style="text-align: right;">
                <h2>Our best <span class="my-green">gardeners</span> are <br>ready to help you</h2>
                <a href="#contacts" class="orange-button contact-us">Contsct us</a>
                <img src="img/leafs2.png" alt="leafs" width="152" height="180">
            </div>
        </section>
        <section id="contacts" class="contacts">
            <img src="img/contact_woman.png" alt="garden woman" width="400" style="padding-top: 53px; padding-right: 50px;">
            <h2 style="margin-block-start: 60px; flex-grow: 1; text-align: center;">Contact us</h2>
            <form action="/city-form">
                <label>
                    <input type="text" placeholder="City" readonly data-val="inactive"> 
                    <img src="img/white-check-mark.svg" class="circle2 dark" alt="unselect" style="position: absolute; right: 35px;" data-val="inactive">
                </label>               
            </form>         
        </section>
    </main>
    <footer style="justify-content: center;">
        <div><span>Â©</span> <span style="margin: 0px 20px;">2023</span> <a href="https://github.com/ArishaSuperNyasha/rsschool-plants" target="_blank">github</a></div>
        <div class="addpad" style="flex-grow: 1; text-align: center;"><a href="https://rs.school/js-stage0/" target="_blank">Rolling Scopes School</a></div>
        <div style="display: flex; width: 15%; min-width: 182.62px; justify-content: space-between;">
            <a href="https://vk.com" target="_blank"><img src="img/footer-icons/inst1.svg" alt="Instagram link" height="32" width="32"></a>
            <a href="https://vk.com" target="_blank"><img src="img/footer-icons/fb1.svg" alt="Facebook link" height="32" width="32" style="margin-left: 20px;"></a>
            <a href="https://vk.com" target="_blank"><img src="img/footer-icons/tw1.svg" alt="Tweeter link" height="32" width="32" style="margin: 0px 20px;"></a>
            <a href="https://vk.com" target="_blank"><img src="img/footer-icons/pinterest1.svg" alt="Pinterest link" height="32" width="32"></a>
        </div>
    </footer>
    <div class="showMenu">
        <div>
            <a href="#welcome" class="my-orange" style="font-weight: bold;">Home</a>
            <a href="#about">About us</a>
            <a href="#service">Service</a>
            <a href="#prices">Price</a>
            <a href="#contacts">Contacts</a>
        </div>
        <button class="learnmore-button" style="font-weight: bold;">X</button>
    </div>

    <script>
        function createBurgerIcon () {
            if (document.querySelector('.burger') === null) {
                const burger = document.createElement('div');
                burger.className = 'burger';
                const elem = document.querySelector('.logo');
                elem.append(burger);
                const div = document.createElement('div');
                for (let i = 0; i < 4; i++) burger.append(div.cloneNode(false));
            }
        };
        createBurgerIcon();

        function burgerMenu (event) {
            const burger = document.querySelector('.burger');
            const menu = document.querySelector('.showMenu');

            let elem = event.target;
            const ifBurger = elem.closest('.burger');
            const ifMenuBut = elem.closest('.showMenu button');

            function eventTypeCheck (curElem, another, type) {
                if (type === 'click') {
                    curElem.style.opacity = '0';
                    another.style.display = 'flex';
                }
                else if (type === 'transitionend' && curElem.style.opacity === '0') {
                    curElem.style.display = 'none';
                    another.style.opacity = '1';
                }
                return;
            } 
            if (ifBurger) {
                eventTypeCheck(burger, menu, event.type);
            }
            else if (ifMenuBut) {
                eventTypeCheck(menu, burger, event.type);
            }

            else if (burger.style.opacity === menu.style.opacity) {
                eventTypeCheck(menu, burger, 'transitionend');
            }
            else {
                function hideMenu() {
                    eventTypeCheck(menu, burger, 'click');
                }
                if (elem.closest('.showMenu')) {
                    if (elem.closest('a')) {
                        hideMenu();
                    }
                }
                else hideMenu();
            }
        };

        document.body.addEventListener('click', burgerMenu);
        document.body.addEventListener('transitionend', burgerMenu);

        window.addEventListener('resize', () => {
            if (window.screen.width > 499) {
                document.querySelector('.showMenu button').dispatchEvent(new Event('click'));
            }

            callusButOnCenter();
        });

        function blurFunction (event) {
            const elem = event.target.closest('.orange-button');
            function removeBlur () {
                for (item of document.querySelectorAll('#service figure')) item.classList.remove('blured');
            }

            if (elem === null) {
                for (item of document.querySelectorAll("#service [data-val='active']")) item.dataset.val = 'inactive';
                removeBlur();
                return;
            }
            if (elem.hasAttribute('data-gardening')) {
                
                const returnOrNot = buttonToggler(elem);
                if (!returnOrNot) return;

                const inactiveButtons = [];
                for (item of document.querySelectorAll("#service [data-val='inactive']")) inactiveButtons.push(item.dataset.gardening);
                
                removeBlur();
                if (inactiveButtons.length !== 3) {
                    inactiveButtons.forEach((i) => {
                        const cssSelector = `#service .cards6 [data-gardening=\'${i}\']`;
                        for (item of document.querySelectorAll(cssSelector)) item.closest('figure').classList.toggle('blured');
                    })
                }
            }
        }

        function pricesAccordion (event) {
            const elem = event.target.closest('#prices button');
            if (event.target.closest('#prices img')) {
                buttonToggler(elem);
                if (elem.dataset.val === 'active') {
                    for (item of document.querySelectorAll('#prices [data-val="active"]')) item.dataset.val = 'inactive';
                    
                    const buttonText = elem.querySelector('span').firstChild.data;
                    let priseInSpan = 0;
                    switch (buttonText) {
                        case 'Pro care':
                            priseInSpan = 35;
                            break;
                        case 'Standard':
                            priseInSpan = 25;
                            break;
                        case 'Basics':
                            priseInSpan = 15;
                            break;
                    }

                    elem.dataset.val = 'active';

                    const button = event.target.closest('#prices button');
                    const htmlCode = `\n                <section class="accordion">\n                    <section></section>\n                    <p>Release of Letraset sheets containing Lorem Ipsum passages, and more recently</p>\n                    <p class="section-price"><span>$${priseInSpan}</span> / per hour</p>\n                    <a href="#contacts">Order</a>\n                </section>`
                    button.insertAdjacentHTML("beforeend", htmlCode);
                }

                const inactiveButtons = document.querySelectorAll('#prices [data-val="inactive"] .accordion');
                if (inactiveButtons.length > 0) {
                    for (item of inactiveButtons) item.remove();
                }
            }
        }
        
        function buttonToggler (elem) {
            const val = elem.dataset.val;
                if (val === "inactive") {
                    if (elem.className === 'orange-button') {
                        if (document.querySelectorAll("#service [data-val='active']").length > 1) return false;
                    }
                    if (elem.tagName === 'INPUT') buttonToggler(elem.nextElementSibling);
                    return elem.dataset.val = 'active';
                } 
                else if (val === "active") {
                    if (elem.tagName === 'INPUT') buttonToggler(elem.nextElementSibling);
                    return elem.dataset.val = 'inactive';
                }
        }

        function cityChoose (event) {

            function past (event) {

                function createCard () {
                    const city = document.querySelector('#contacts input').placeholder;
                        let phone = adress = '';
                        switch (city) {
                            case 'Canandaigua, NY':
                                phone = '+1	585	393 0001'; adress = '151 Charlotte Street';
                                break;
                            case 'New York City':
                                phone = '+1	212	456 0002'; adress = '9 East 91st Street';
                                break;
                            case 'Yonkers, NY':
                                phone = '+1	914	678 0003'; adress = '511 Warburton Ave';
                                break;
                            case 'Sherrill, NY':
                                phone = '+1	315	908 0004'; adress = '14 WEST Noyes BLVD';
                                break;
                        }

                    const table = document.querySelector('#contacts table');
                    if (!table) {
                        const htmlCode = `\n                <table>\n                    <tbody>\n                        <tr>\n                            <td>City:</td>\n                            <td>${city}</td>\n                        </tr>\n                        <tr>\n                            <td>Phone:</td>\n                            <td>${phone}</td>\n                        </tr>\n                        <tr>\n                            <td>Office adress:</td>\n                            <td>${adress}</td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td><a class="learnmore-button">Call us</a></td>\n                        </tr>\n                    </tbody>\n                </table> `
                        document.querySelector('#contacts form').insertAdjacentHTML("beforeend", htmlCode);
                    }
                    else {
                        table.style.display = '';
                        table.rows[0].cells[1].textContent = city;
                        table.rows[1].cells[1].textContent = phone;
                        table.rows[2].cells[1].textContent = adress;
                    }
                    document.querySelector('#contacts table a').href = `tel:${phone}`

                    callusButOnCenter();
                }

                if (event.target.tagName === 'A') {
                    document.querySelector('#contacts form input').placeholder = event.target.textContent;
                    cityChooseHide();
                    createCard();
                }            
            }
            
            if (event.target.dataset.val === 'inactive') buttonToggler(event.target);

            if (document.querySelectorAll('#contacts form div a').length === 0) {

                function createCelectImitator(event) {
                    const div = document.createElement('div');
                    document.querySelector('#contacts form').append(div);
                    const cityList = ['Canandaigua, NY', 'New York City', 'Yonkers, NY', 'Sherrill, NY',];
                    cityList.forEach((item) => {
                        const a = document.createElement('a');
                        div.append(a);
                        a.textContent = item;
                    });
                    
                    div.addEventListener('click', past);
                }

                createCelectImitator();
            }
            else {
                let div = document.querySelector('#contacts form div');
                if (div.style.display === 'none') div.style.display = 'flex';
            }
         
            let table = document.querySelector('#contacts table');
            if (table) table.style.display = 'none';
        }

        function cityChooseHide (event) {
            if (document.querySelectorAll('#contacts form a').length > 0) {
                if (!event || !event.target.closest('#contacts form')) {
                    document.querySelector('#contacts form div').style.display = 'none';

                    const input = document.querySelector('#contacts input');
                    if (input.dataset.val === 'active') buttonToggler(input);

                    const table = document.querySelector('#contacts table')
                    if (table) table.style.display = '';
                }
            } 
        }

        function callusButOnCenter () {
            const table = document.querySelector('#contacts table');
            if (table) {
                if (window.screen.width < 500) {
                    if (table.rows[3].cells.length === 2) {
                        let button = table.rows[3].cells[1];
                        button.colspan = '2';
                        table.rows[3].cells[0].remove();

                        button = button.parentElement;
                        button.style.display = 'flex';
                        button.style.flexDirection = 'column';
                        button.style.alignItems = 'center';
                    }
                    else return;
                }
                else {
                    if (table.rows[3].cells.length < 2) {
                        let button = table.rows[3].cells[0];
                        table.rows[3].cells[0].insertAdjacentHTML('beforebegin', '<td></td>');

                        button.parentElement.style.display = '';
                    }
                }
            }
        }

        document.body.addEventListener('click', blurFunction);
        document.body.addEventListener('click', pricesAccordion);

        document.querySelector('input').addEventListener('focus', cityChoose);
        document.body.addEventListener('click', cityChooseHide);
    </script>
</body>
</html>
